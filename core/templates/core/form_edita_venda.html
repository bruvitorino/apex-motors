<!-- Conteúdo ATUALIZADO para: core/templates/core/form_edita_venda.html -->

{% extends 'core/base.html' %}

{% block title %}Editar Venda{% endblock %}

{% block content %}
    <h1 class="mb-4">Editando Venda #{{ venda.id_vendas }}</h1>

    <form method="POST" style="max-width: 600px;">
        {% csrf_token %}
        
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="id_cliente" class="form-label">Cliente:</label>
                <select class="form-select" id="id_cliente" name="id_cliente" required>
                    {% for obj in clientes %}<option value="{{ obj.id_clientes }}" {% if obj.id_clientes == venda.id_clientes_id %}selected{% endif %}>{{ obj.nome }}</option>{% endfor %}
                </select>
            </div>
            <div class="col-md-6 mb-3">
                <label for="id_veiculo" class="form-label">Veículo:</label>
                <select class="form-select" id="id_veiculo" name="id_veiculo" required>
                    {% for obj in veiculos %}<option value="{{ obj.id_veiculos }}" {% if obj.id_veiculos == venda.id_veiculos_id %}selected{% endif %}>{{ obj.nome }}</option>{% endfor %}
                </select>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="id_vendedor" class="form-label">Vendedor:</label>
                <select class="form-select" id="id_vendedor" name="id_vendedor" required>
                    {% for obj in vendedores %}<option value="{{ obj.id_vendedores }}" {% if obj.id_vendedores == venda.id_vendedores_id %}selected{% endif %}>{{ obj.nome }}</option>{% endfor %}
                </select>
            </div>
            <div class="col-md-6 mb-3">
                <label for="id_concessionaria" class="form-label">Concessionária:</label>
                <select class="form-select" id="id_concessionaria" name="id_concessionaria" required>
                    {% for obj in concessionarias %}<option value="{{ obj.id_concessionarias }}" {% if obj.id_concessionarias == venda.id_concessionarias_id %}selected{% endif %}>{{ obj.nome }}</option>{% endfor %}
                </select>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="valor_pago" class="form-label">Valor Pago:</label>
                <input type="number" step="0.01" class="form-control" id="valor_pago" name="valor_pago" value="{{ venda.valor_pago|stringformat:'f' }}" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="data_venda" class="form-label">Data da Venda:</label>
                <input type="datetime-local" class="form-control" id="data_venda" name="data_venda" value="{{ venda.data_venda|date:'Y-m-d\TH:i' }}" required>
            </div>
        </div>

        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Salvar Alterações</button>
            <a href="{% url 'lista_vendas' %}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
{% endblock %}
